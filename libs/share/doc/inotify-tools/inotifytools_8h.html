<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>libinotifytools: inotifytools/inotifytools.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>inotifytools/inotifytools.h File Reference</h1>
<p>inotifytools library public interface.  
<a href="#_details">More...</a></p>

<p><a href="inotifytools_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a7efdc91ac4b26c374d287aa11b3af994">inotifytools_cleanup</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a313399ccce221c8a5862892396d1a8ec">inotifytools_error</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a744bb8792d8ea8edbaf8f845fe1d9307">inotifytools_event_to_str</a> (int events)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a317a5b1ea969f570a49c4549b22e7e71">inotifytools_event_to_str_sep</a> (int events, char sep)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#afd4dcc915248f2d0b0ae708e88611186">inotifytools_filename_from_wd</a> (int wd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a6ed4450ad545bde13a1328e53ed8cf6d">inotifytools_fprintf</a> (FILE *file, struct inotify_event *event, char *fmt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a1d96f4600d1187670304b83439b0cd05">inotifytools_get_max_queued_events</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a9e8052a5fb77768cec9fff4aed9b9eb0">inotifytools_get_max_user_instances</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#ae3b79f096737ef3c7e176324514b4556">inotifytools_get_max_user_watches</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#aaf934e6f66eb02f3c6e72d65c9bd610c">inotifytools_get_num_watches</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a70bf8afcf5dce7d324d3a1a4cf48871a">inotifytools_get_stat_by_filename</a> (char const *filename, int event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a4d5002bd8504b70faed608886e0fa307">inotifytools_get_stat_by_wd</a> (int wd, int event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#af3de070bdf428d548e0b54f5e9043dcc">inotifytools_get_stat_total</a> (int event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a6f246b367da63c839aab6546319d196c">inotifytools_ignore_events_by_inverted_regex</a> (char const *pattern, int flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a07f4f258123feb8864f89663a2785ef0">inotifytools_ignore_events_by_regex</a> (char const *pattern, int flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a3765c7874caeb0732926f34ae3c3cd63">inotifytools_initialize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#ae25cb60b12e3555795f55fb8c55db692">inotifytools_initialize_stats</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct inotify_event *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#acd99ad4277e4259b05eecc7fa51a715c">inotifytools_next_event</a> (long int timeout)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct inotify_event *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a585a4532ebd9f441c0bc61ec29973a55">inotifytools_next_events</a> (long int timeout, int num_events)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#ac2c06dd72f39a6145ea3b6661378df31">inotifytools_printf</a> (struct inotify_event *event, char *fmt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a2a4ca66a9d8b0825d4272cd5003a9a0f">inotifytools_remove_watch_by_filename</a> (char const *filename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a771f60d2232201c691fe725d5cf7e019">inotifytools_remove_watch_by_wd</a> (int wd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#ac6f5ecf6f3d854535132fe9790db008d">inotifytools_replace_filename</a> (char const *oldname, char const *newname)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a764239f33bd2a092c445362e75828181">inotifytools_set_filename_by_filename</a> (char const *oldname, char const *newname)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#af80acc2952c748a80641926ff222571c">inotifytools_set_filename_by_wd</a> (int wd, char const *filename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#af4528ccdf013b4c86e8f7fe4db88244a">inotifytools_set_printf_timefmt</a> (char *fmt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a92f2dc66af4fd01b09b64b6813686282">inotifytools_snprintf</a> (char *out, int size, struct inotify_event *event, char *fmt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#aabf4cbafd50012f6e35b32a052677c74">inotifytools_sprintf</a> (char *out, struct inotify_event *event, char *fmt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#ac5f03415912fa505bcb7f2caf9273b45">inotifytools_str_to_event</a> (char const *event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a7e26c94c983d93669813c439883b334f">inotifytools_str_to_event_sep</a> (char const *event, char sep)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a5e51d1c22c968f8c446ede5ff4caa901">inotifytools_watch_file</a> (char const *filename, int events, ino_callback_t cbfunc, void *cbarg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a8e7c7a3f704f323ee197c1a3c65e8bb0">inotifytools_watch_files</a> (char const *filenames[], int events, ino_callback_t cbfunc, void *cbarg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a9092c1154cdf7885ddb70d65438379dd">inotifytools_watch_recursively</a> (char const *path, int events, ino_callback_t cbfunc, void *cbarg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a4262597ad6d28dc97db04b5663494e5c">inotifytools_watch_recursively_with_exclude</a> (char const *path, int events, char const **exclude_list, ino_callback_t cbfunc, void *cbarg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inotifytools_8h.html#a594e7f515b392c07c4f1f4eeffcda6c3">inotifytools_wd_from_filename</a> (char const *filename)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>inotifytools library public interface. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Rohan McGovern, &lt;<a href="mailto:rohan@mcgovern.id.au">rohan@mcgovern.id.au</a>&gt;</dd></dl>
<p>This library provides a thin layer on top of the basic inotify interface. The primary use is to easily set up watches on files, potentially many files at once, and read events without having to deal with low-level I/O. There are also several utility functions for inotify-related string formatting.</p>
<p>To use this library, you must <code>#include</code> the following headers accordingly: </p>
<ul>
<li><code>&lt;<a class="el" href="inotifytools_8h.html" title="inotifytools library public interface.">inotifytools/inotifytools.h</a>&gt;</code> - to use any functions declared in this file. </li>
<li><code>&lt;inotifytools/inotify.h&gt;</code> - to have the <code>inotify_event</code> type defined and the numeric IN_* event constants defined. If <code>&lt;sys/inotify.h&gt;</code> was present on your system at compile time, this header simply includes that. Otherwise it includes <code>&lt;inotifytools/inotify-nosys.h&gt;</code>.</li>
</ul>
<h2><a class="anchor" id="example">
Example</a></h2>
<p>This very simple program recursively watches the entire directory tree under its working directory for events, then prints them out with a timestamp. </p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;stdio.h&gt;</span>
<span class="preprocessor">#include &lt;string.h&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="inotifytools_8h.html" title="inotifytools library public interface.">inotifytools/inotifytools.h</a>&gt;</span>
<span class="preprocessor">#include &lt;inotifytools/inotify.h&gt;</span>

<span class="comment">/*</span>
<span class="comment"> * libinotifytools example program.</span>
<span class="comment"> * Compile with gcc -linotifytools example.c</span>
<span class="comment"> */</span>
<span class="keywordtype">int</span> main() {
        <span class="comment">// initialize and watch the entire directory tree from the current working</span>
        <span class="comment">// directory downwards for all events</span>
        <span class="keywordflow">if</span> ( !<a class="code" href="inotifytools_8h.html#a3765c7874caeb0732926f34ae3c3cd63">inotifytools_initialize</a>()
          || !<a class="code" href="inotifytools_8h.html#a9092c1154cdf7885ddb70d65438379dd">inotifytools_watch_recursively</a>( <span class="stringliteral">&quot;.&quot;</span>, IN_ALL_EVENTS ) ) {
                fprintf(stderr, <span class="stringliteral">&quot;%s\n&quot;</span>, strerror( <a class="code" href="inotifytools_8h.html#a313399ccce221c8a5862892396d1a8ec">inotifytools_error</a>() ) );
                <span class="keywordflow">return</span> -1;
        }

        <span class="comment">// set time format to 24 hour time, HH:MM:SS</span>
        <a class="code" href="inotifytools_8h.html#af4528ccdf013b4c86e8f7fe4db88244a">inotifytools_set_printf_timefmt</a>( <span class="stringliteral">&quot;%T&quot;</span> );

        <span class="comment">// Output all events as &quot;&lt;timestamp&gt; &lt;path&gt; &lt;events&gt;&quot;</span>
        <span class="keyword">struct </span>inotify_event * <span class="keyword">event</span> = <a class="code" href="inotifytools_8h.html#acd99ad4277e4259b05eecc7fa51a715c">inotifytools_next_event</a>( -1 );
        <span class="keywordflow">while</span> ( event ) {
                <a class="code" href="inotifytools_8h.html#ac2c06dd72f39a6145ea3b6661378df31">inotifytools_printf</a>( event, <span class="stringliteral">&quot;%T %w%f %e\n&quot;</span> );
                <span class="keyword">event</span> = <a class="code" href="inotifytools_8h.html#acd99ad4277e4259b05eecc7fa51a715c">inotifytools_next_event</a>( -1 );
        }
}

</pre></div><h2><a class="anchor" id="events">
Events</a></h2>
<dl class="note"><dt><b>Note:</b></dt><dd>This section comes almost verbatim from the inotify(7) man page.</dd></dl>
<dl class="warning"><dt><b>Warning:</b></dt><dd>The information here applies to inotify in Linux 2.6.17. Older versions of Linux may not support all the events described here.</dd></dl>
<p>The following numeric events can be specified to functions in inotifytools, and may be present in events returned through inotifytools:</p>
<ul>
<li><code>IN_ACCESS</code> - File was accessed (read) <em>*</em> </li>
<li><code>IN_ATTRIB</code> - Metadata changed (permissions, timestamps, extended attributes, etc.) <em>*</em> </li>
<li><code>IN_CLOSE_WRITE</code> - File opened for writing was closed <em>*</em> </li>
<li><code>IN_CLOSE_NOWRITE</code> - File not opened for writing was closed <em>*</em> </li>
<li><code>IN_CREATE</code> - File/directory created in watched directory <em>*</em> </li>
<li><code>IN_DELETE</code> - File/directory deleted from watched directory <em>*</em> </li>
<li><code>IN_DELETE_SELF</code> - Watched file/directory was itself deleted </li>
<li><code>IN_MODIFY</code> - File was modified <em>*</em> </li>
<li><code>IN_MOVE_SELF</code> - Watched file/directory was itself moved </li>
<li><code>IN_MOVED_FROM</code> - File moved out of watched directory <em>*</em> </li>
<li><code>IN_MOVED_TO</code> - File moved into watched directory <em>*</em> </li>
<li><code>IN_OPEN</code> - File was opened <em>*</em> </li>
</ul>
<p>When monitoring a directory, the events marked with an asterisk <em>*</em> above can occur for files in the directory, in which case the name field in the returned inotify_event structure identifies the name of the file within the directory.</p>
<p>The IN_ALL_EVENTS macro is defined as a bit mask of all of the above events.</p>
<p>Two additional convenience macros are IN_MOVE, which equates to IN_MOVED_FROM|IN_MOVED_TO, and IN_CLOSE which equates to IN_CLOSE_WRITE|IN_CLOSE_NOWRITE.</p>
<p>The following bitmasks can also be provided when creating a new watch:</p>
<ul>
<li><code>IN_DONT_FOLLOW</code> - Don't dereference pathname if it is a symbolic link </li>
<li><code>IN_MASK_ADD</code> - Add (OR) events to watch mask for this pathname if it already exists (instead of replacing mask) </li>
<li><code>IN_ONESHOT</code> - Monitor pathname for one event, then remove from watch list </li>
<li><code>IN_ONLYDIR</code> - Only watch pathname if it is a directory</li>
</ul>
<p>The following bitmasks may occur in events generated by a watch:</p>
<ul>
<li><code>IN_IGNORED</code> - Watch was removed explicitly (inotifytools_remove_watch_*) or automatically (file was deleted, or file system was unmounted) </li>
<li><code>IN_ISDIR</code> - Subject of this event is a directory </li>
<li><code>IN_Q_OVERFLOW</code> - Event queue overflowed (wd is -1 for this event) </li>
<li><code>IN_UNMOUNT</code> - File system containing watched object was unmounted</li>
</ul>
<h2><a class="anchor" id="TODO">
TODO list</a></h2>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Improve wd/filename mapping. Currently there is no explicit code for handling different filenames mapping to the same inode (and hence, wd). gamin's approach sounds good: let the user watch an inode using several different filenames, and when an event occurs on the inode, generate an event for each filename. </dd></dl>

<p>Definition in file <a class="el" href="inotifytools_8h_source.html">inotifytools.h</a>.</p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a7efdc91ac4b26c374d287aa11b3af994"></a><!-- doxytag: member="inotifytools.h::inotifytools_cleanup" ref="a7efdc91ac4b26c374d287aa11b3af994" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inotifytools_cleanup </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Close inotify and free the memory used by inotifytools.</p>
<p>If you call this function, you must call <a class="el" href="inotifytools_8h.html#a3765c7874caeb0732926f34ae3c3cd63">inotifytools_initialize()</a> again before any other functions can be used. </p>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l00328">328</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l00328">inotifytools_cleanup()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l00328">inotifytools_cleanup()</a>.</p>

</div>
</div>
<a class="anchor" id="a313399ccce221c8a5862892396d1a8ec"></a><!-- doxytag: member="inotifytools.h::inotifytools_error" ref="a313399ccce221c8a5862892396d1a8ec" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_error </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the last error which occurred.</p>
<p>When a function fails, call this to find out why. The returned value is a typical <em>errno</em> value, the meaning of which depends on context. For example, if <a class="el" href="inotifytools_8h.html#a5e51d1c22c968f8c446ede5ff4caa901">inotifytools_watch_file()</a> fails because you attempt to watch a file which doesn't exist, this function will return <em>ENOENT</em>.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>an error code. </dd></dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l01755">1755</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l01755">inotifytools_error()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l01755">inotifytools_error()</a>.</p>

</div>
</div>
<a class="anchor" id="a744bb8792d8ea8edbaf8f845fe1d9307"></a><!-- doxytag: member="inotifytools.h::inotifytools_event_to_str" ref="a744bb8792d8ea8edbaf8f845fe1d9307" args="(int events)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* inotifytools_event_to_str </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>events</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Convert event from integer form to string form (as in inotify.h).</p>
<p>The returned string is from static storage; subsequent calls to this function or <a class="el" href="inotifytools_8h.html#a317a5b1ea969f570a49c4549b22e7e71">inotifytools_event_to_str_sep()</a> will overwrite it. Don't free() it and make a copy if you want to keep it.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>events</em>&nbsp;</td><td>OR'd event(s) in integer form as defined in inotify.h. See section <a class="el" href="inotifytools_8h.html#events">Events</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>comma-separated string representing the event(s), in no particular order</dd></dl>
<h2><a class="anchor" id="example">
Example</a></h2>
<div class="fragment"><pre class="fragment"> <span class="keywordtype">int</span> eventnum == IN_MODIFY | IN_CLOSE | IN_CREATE;
 <span class="keywordtype">char</span> * eventstr = <a class="code" href="inotifytools_8h.html#a744bb8792d8ea8edbaf8f845fe1d9307">inotifytools_event_to_str</a>( eventnum );
 printf( <span class="stringliteral">&quot;%s\n&quot;</span>, eventstr );
 <span class="comment">// outputs something like MODIFY,CLOSE,CREATE but order not guaranteed.</span>
</pre></div> 
<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l00630">630</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l00630">inotifytools_event_to_str()</a>, and <a class="el" href="inotifytools_8c_source.html#l00666">inotifytools_event_to_str_sep()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l00630">inotifytools_event_to_str()</a>, and <a class="el" href="inotifytools_8c_source.html#l01981">inotifytools_snprintf()</a>.</p>

</div>
</div>
<a class="anchor" id="a317a5b1ea969f570a49c4549b22e7e71"></a><!-- doxytag: member="inotifytools.h::inotifytools_event_to_str_sep" ref="a317a5b1ea969f570a49c4549b22e7e71" args="(int events, char sep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* inotifytools_event_to_str_sep </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>events</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>sep</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Convert event from integer form to string form (as in inotify.h).</p>
<p>The returned string is from static storage; subsequent calls to this function or <a class="el" href="inotifytools_8h.html#a744bb8792d8ea8edbaf8f845fe1d9307">inotifytools_event_to_str()</a> will overwrite it. Don't free() it and make a copy if you want to keep it.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>events</em>&nbsp;</td><td>OR'd event(s) in integer form as defined in inotify.h</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sep</em>&nbsp;</td><td>character used to separate events</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><em>sep</em> separated string representing the event(s), in no particular order. If the integer is not made of OR'ed inotify events, the string returned will be a hexadecimal representation of the integer.</dd></dl>
<h2><a class="anchor" id="example">
Example</a></h2>
<div class="fragment"><pre class="fragment"> <span class="keywordtype">int</span> eventnum == IN_MODIFY | IN_CLOSE | IN_CREATE;
 <span class="keywordtype">char</span> * eventstr = <a class="code" href="inotifytools_8h.html#a317a5b1ea969f570a49c4549b22e7e71">inotifytools_event_to_str_sep</a>( eventnum, <span class="charliteral">&apos;-&apos;</span> );
 printf( <span class="stringliteral">&quot;%s\n&quot;</span>, eventstr );
 <span class="comment">// outputs something like MODIFY-CLOSE-CREATE but order not guaranteed.</span>
</pre></div> 
<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l00666">666</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l00666">inotifytools_event_to_str_sep()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l00630">inotifytools_event_to_str()</a>, <a class="el" href="inotifytools_8c_source.html#l00666">inotifytools_event_to_str_sep()</a>, and <a class="el" href="inotifytools_8c_source.html#l01981">inotifytools_snprintf()</a>.</p>

</div>
</div>
<a class="anchor" id="afd4dcc915248f2d0b0ae708e88611186"></a><!-- doxytag: member="inotifytools.h::inotifytools_filename_from_wd" ref="afd4dcc915248f2d0b0ae708e88611186" args="(int wd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* inotifytools_filename_from_wd </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>wd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the filename used to establish a watch.</p>
<p><a class="el" href="inotifytools_8h.html#a3765c7874caeb0732926f34ae3c3cd63">inotifytools_initialize()</a> must be called before this function can be used.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>wd</em>&nbsp;</td><td>watch descriptor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>filename associated with watch descriptor <em>wd</em>, or NULL if <em>wd</em> is not associated with any filename.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>This always returns the filename which was used to establish a watch. This means the filename may be a relative path. If this isn't desired, then always use absolute paths when watching files. Also, this is not necessarily the filename which might have been used to cause an event on the file, since inotify is inode based and there can be many filenames mapping to a single inode. Finally, if a file is moved or renamed while being watched, the filename returned will still be the original name. </dd></dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l00861">861</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l00861">inotifytools_filename_from_wd()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l00861">inotifytools_filename_from_wd()</a>, and <a class="el" href="inotifytools_8c_source.html#l01981">inotifytools_snprintf()</a>.</p>

</div>
</div>
<a class="anchor" id="a6ed4450ad545bde13a1328e53ed8cf6d"></a><!-- doxytag: member="inotifytools.h::inotifytools_fprintf" ref="a6ed4450ad545bde13a1328e53ed8cf6d" args="(FILE *file, struct inotify_event *event, char *fmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_fprintf </td>
          <td>(</td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct inotify_event *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Print a string to a file using an inotify_event and a printf-like syntax. The string written will only ever be up to 4096 characters in length.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>file</em>&nbsp;</td><td>file to print to</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>the event to use to construct a string.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>the format string used to construct a string.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of characters written, or -1 if an error occurs.</dd></dl>
<h2><a class="anchor" id="syntax">
Format string syntax</a></h2>
<p>The following tokens will be replaced with the specified string: </p>
<ul>
<li><code>%w</code> - This will be replaced with the name of the Watched file on which an event occurred. </li>
<li><code>%f</code> - When an event occurs within a directory, this will be replaced with the name of the File which caused the event to occur. Otherwise, this will be replaced with an empty string. </li>
<li><code>%e</code> - Replaced with the Event(s) which occurred, comma-separated. </li>
<li><code>%Xe</code> - Replaced with the Event(s) which occurred, separated by whichever character is in the place of `X'. </li>
<li><code>%T</code> - Replaced by the current Time in the format specified by the string previously passed to <a class="el" href="inotifytools_8h.html#af4528ccdf013b4c86e8f7fe4db88244a">inotifytools_set_printf_timefmt()</a>, or replaced with an empty string if that function has never been called.</li>
</ul>
<h2><a class="anchor" id="example">
Example</a></h2>
<div class="fragment"><pre class="fragment"> <span class="comment">// suppose this is the only file watched.</span>
 <a class="code" href="inotifytools_8h.html#a5e51d1c22c968f8c446ede5ff4caa901">inotifytools_watch_file</a>( <span class="stringliteral">&quot;mydir/&quot;</span>, IN_CLOSE );

 <span class="comment">// wait until an event occurs</span>
 <span class="keyword">struct </span>inotify_event * <span class="keyword">event</span> = <a class="code" href="inotifytools_8h.html#acd99ad4277e4259b05eecc7fa51a715c">inotifytools_next_event</a>( -1 );

 <a class="code" href="inotifytools_8h.html#a6ed4450ad545bde13a1328e53ed8cf6d">inotifytools_fprintf</a>(stderr, event, <span class="stringliteral">&quot;in %w, file %f had event(s): %.e\n&quot;</span>);
 <span class="comment">// suppose the file &apos;myfile&apos; in mydir was read from and closed.  Then,</span>
 <span class="comment">// this prints to standard error something like:</span>
 <span class="comment">// &quot;in mydir/, file myfile had event(s): CLOSE_NOWRITE.CLOSE.ISDIR\n&quot;</span>
</pre></div> 
<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l01872">1872</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l01872">inotifytools_fprintf()</a>, and <a class="el" href="inotifytools_8c_source.html#l01930">inotifytools_sprintf()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l01872">inotifytools_fprintf()</a>, and <a class="el" href="inotifytools_8c_source.html#l01827">inotifytools_printf()</a>.</p>

</div>
</div>
<a class="anchor" id="a1d96f4600d1187670304b83439b0cd05"></a><!-- doxytag: member="inotifytools.h::inotifytools_get_max_queued_events" ref="a1d96f4600d1187670304b83439b0cd05" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_get_max_queued_events </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the event queue size.</p>
<p>This setting can also be read or modified by accessing the file <em>/proc/sys/fs/inotify/max_queued_events</em>.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the maximum number of events which will be queued in the kernel. </dd></dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l02120">2120</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l02120">inotifytools_get_max_queued_events()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l02120">inotifytools_get_max_queued_events()</a>.</p>

</div>
</div>
<a class="anchor" id="a9e8052a5fb77768cec9fff4aed9b9eb0"></a><!-- doxytag: member="inotifytools.h::inotifytools_get_max_user_instances" ref="a9e8052a5fb77768cec9fff4aed9b9eb0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_get_max_user_instances </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the maximum number of user instances of inotify.</p>
<p>This setting can also be read or modified by accessing the file <em>/proc/sys/fs/inotify/max_user_instances</em>.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the maximum number of inotify file descriptors a single user can obtain. </dd></dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l02135">2135</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l02135">inotifytools_get_max_user_instances()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l02135">inotifytools_get_max_user_instances()</a>.</p>

</div>
</div>
<a class="anchor" id="ae3b79f096737ef3c7e176324514b4556"></a><!-- doxytag: member="inotifytools.h::inotifytools_get_max_user_watches" ref="ae3b79f096737ef3c7e176324514b4556" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_get_max_user_watches </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the maximum number of user watches.</p>
<p>This setting can also be read or modified by accessing the file <em>/proc/sys/fs/inotify/max_user_watches</em>.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the maximum number of inotify watches a single user can obtain per inotify instance. </dd></dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l02150">2150</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l02150">inotifytools_get_max_user_watches()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l02150">inotifytools_get_max_user_watches()</a>.</p>

</div>
</div>
<a class="anchor" id="aaf934e6f66eb02f3c6e72d65c9bd610c"></a><!-- doxytag: member="inotifytools.h::inotifytools_get_num_watches" ref="aaf934e6f66eb02f3c6e72d65c9bd610c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_get_num_watches </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the number of watches set up through libinotifytools.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of watches set up by <a class="el" href="inotifytools_8h.html#a5e51d1c22c968f8c446ede5ff4caa901">inotifytools_watch_file()</a>, <a class="el" href="inotifytools_8h.html#a8e7c7a3f704f323ee197c1a3c65e8bb0">inotifytools_watch_files()</a> and <a class="el" href="inotifytools_8h.html#a9092c1154cdf7885ddb70d65438379dd">inotifytools_watch_recursively()</a>. </dd></dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l01781">1781</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l01781">inotifytools_get_num_watches()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l01781">inotifytools_get_num_watches()</a>.</p>

</div>
</div>
<a class="anchor" id="a70bf8afcf5dce7d324d3a1a4cf48871a"></a><!-- doxytag: member="inotifytools.h::inotifytools_get_stat_by_filename" ref="a70bf8afcf5dce7d324d3a1a4cf48871a" args="(char const *filename, int event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_get_stat_by_filename </td>
          <td>(</td>
          <td class="paramtype">char const *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>event</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get statistics by a particular filename.</p>
<p><a class="el" href="inotifytools_8h.html#ae25cb60b12e3555795f55fb8c55db692">inotifytools_initialize_stats()</a> must be called before this function can be used.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>name of file to get stats for.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>a single inotify event to get statistics for, or 0 for event total. See section <a class="el" href="inotifytools_8h.html#events">Events</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of times the event specified by <em>event</em> has occurred on the file specified by <em>filename</em> since stats collection was enabled, or -1 if the file is not being watched or <em>event</em> is invalid.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The filename specified must always be the original name used to establish the watch. </dd></dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l01739">1739</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l01739">inotifytools_get_stat_by_filename()</a>, <a class="el" href="inotifytools_8c_source.html#l01662">inotifytools_get_stat_by_wd()</a>, and <a class="el" href="inotifytools_8c_source.html#l00884">inotifytools_wd_from_filename()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l01739">inotifytools_get_stat_by_filename()</a>.</p>

</div>
</div>
<a class="anchor" id="a4d5002bd8504b70faed608886e0fa307"></a><!-- doxytag: member="inotifytools.h::inotifytools_get_stat_by_wd" ref="a4d5002bd8504b70faed608886e0fa307" args="(int wd, int event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_get_stat_by_wd </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>wd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>event</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get statistics by a particular watch descriptor.</p>
<p><a class="el" href="inotifytools_8h.html#ae25cb60b12e3555795f55fb8c55db692">inotifytools_initialize_stats()</a> must be called before this function can be used.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>wd</em>&nbsp;</td><td>watch descriptor to get stats for.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>a single inotify event to get statistics for, or 0 for event total. See section <a class="el" href="inotifytools_8h.html#events">Events</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of times the event specified by <em>event</em> has occurred on the watch descriptor specified by <em>wd</em> since stats collection was enabled, or -1 if <em>event</em> or <em>wd</em> are invalid. </dd></dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l01662">1662</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l01662">inotifytools_get_stat_by_wd()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l01739">inotifytools_get_stat_by_filename()</a>, and <a class="el" href="inotifytools_8c_source.html#l01662">inotifytools_get_stat_by_wd()</a>.</p>

</div>
</div>
<a class="anchor" id="af3de070bdf428d548e0b54f5e9043dcc"></a><!-- doxytag: member="inotifytools.h::inotifytools_get_stat_total" ref="af3de070bdf428d548e0b54f5e9043dcc" args="(int event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_get_stat_total </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>event</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get statistics aggregated across all watches.</p>
<p><a class="el" href="inotifytools_8h.html#ae25cb60b12e3555795f55fb8c55db692">inotifytools_initialize_stats()</a> must be called before this function can be used.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>a single inotify event to get statistics for, or 0 for event total. See section <a class="el" href="inotifytools_8h.html#events">Events</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of times the event specified by <em>event</em> has occurred over all watches since stats collection was enabled, or -1 if <em>event</em> is not a valid event. </dd></dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l01685">1685</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l01685">inotifytools_get_stat_total()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l01685">inotifytools_get_stat_total()</a>.</p>

</div>
</div>
<a class="anchor" id="a6f246b367da63c839aab6546319d196c"></a><!-- doxytag: member="inotifytools.h::inotifytools_ignore_events_by_inverted_regex" ref="a6f246b367da63c839aab6546319d196c" args="(char const *pattern, int flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_ignore_events_by_inverted_regex </td>
          <td>(</td>
          <td class="paramtype">char const *&nbsp;</td>
          <td class="paramname"> <em>pattern</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Ignore inotify events NOT matching a particular regular expression.</p>
<p><em>pattern</em> is a regular expression and <em>flags</em> is a bitwise combination of POSIX regular expression flags.</p>
<p>On future calls to <a class="el" href="inotifytools_8h.html#a585a4532ebd9f441c0bc61ec29973a55">inotifytools_next_events()</a> or <a class="el" href="inotifytools_8h.html#acd99ad4277e4259b05eecc7fa51a715c">inotifytools_next_event()</a>, the regular expression is executed on the filename of files on which events occur. If the regular expression matches, the matched event will be ignored. </p>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l02219">2219</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l02219">inotifytools_ignore_events_by_inverted_regex()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l02219">inotifytools_ignore_events_by_inverted_regex()</a>.</p>

</div>
</div>
<a class="anchor" id="a07f4f258123feb8864f89663a2785ef0"></a><!-- doxytag: member="inotifytools.h::inotifytools_ignore_events_by_regex" ref="a07f4f258123feb8864f89663a2785ef0" args="(char const *pattern, int flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_ignore_events_by_regex </td>
          <td>(</td>
          <td class="paramtype">char const *&nbsp;</td>
          <td class="paramname"> <em>pattern</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Ignore inotify events matching a particular regular expression.</p>
<p><em>pattern</em> is a regular expression and <em>flags</em> is a bitwise combination of POSIX regular expression flags.</p>
<p>On future calls to <a class="el" href="inotifytools_8h.html#a585a4532ebd9f441c0bc61ec29973a55">inotifytools_next_events()</a> or <a class="el" href="inotifytools_8h.html#acd99ad4277e4259b05eecc7fa51a715c">inotifytools_next_event()</a>, the regular expression is executed on the filename of files on which events occur. If the regular expression matches, the matched event will be ignored. </p>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l02204">2204</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l02204">inotifytools_ignore_events_by_regex()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l02204">inotifytools_ignore_events_by_regex()</a>.</p>

</div>
</div>
<a class="anchor" id="a3765c7874caeb0732926f34ae3c3cd63"></a><!-- doxytag: member="inotifytools.h::inotifytools_initialize" ref="a3765c7874caeb0732926f34ae3c3cd63" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_initialize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialise inotify.</p>
<p>You must call this function before using any function which adds or removes watches or attempts to access any information about watches.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 on success, 0 on failure. On failure, the error can be obtained from <a class="el" href="inotifytools_8h.html#a313399ccce221c8a5862892396d1a8ec">inotifytools_error()</a>. </dd></dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l00283">283</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l00283">inotifytools_initialize()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l00283">inotifytools_initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="ae25cb60b12e3555795f55fb8c55db692"></a><!-- doxytag: member="inotifytools.h::inotifytools_initialize_stats" ref="ae25cb60b12e3555795f55fb8c55db692" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inotifytools_initialize_stats </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize or reset statistics.</p>
<p><a class="el" href="inotifytools_8h.html#a3765c7874caeb0732926f34ae3c3cd63">inotifytools_initialize()</a> must be called before this function can be used.</p>
<p>When this function is called, all subsequent events will be tallied. Statistics can then be obtained via the <em>inotifytools_get_stat_*</em> functions.</p>
<p>After the first call, subsequent calls to this function will reset the event tallies to 0. </p>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l00420">420</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l00420">inotifytools_initialize_stats()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l00420">inotifytools_initialize_stats()</a>.</p>

</div>
</div>
<a class="anchor" id="acd99ad4277e4259b05eecc7fa51a715c"></a><!-- doxytag: member="inotifytools.h::inotifytools_next_event" ref="acd99ad4277e4259b05eecc7fa51a715c" args="(long int timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct inotify_event* inotifytools_next_event </td>
          <td>(</td>
          <td class="paramtype">long int&nbsp;</td>
          <td class="paramname"> <em>timeout</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the next inotify event to occur.</p>
<p><a class="el" href="inotifytools_8h.html#a3765c7874caeb0732926f34ae3c3cd63">inotifytools_initialize()</a> must be called before this function can be used.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td>maximum amount of time, in seconds, to wait for an event. If <em>timeout</em> is non-negative, the function is non-blocking. If <em>timeout</em> is negative, the function will block until an event occurs.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>pointer to an inotify event, or NULL if function timed out before an event occurred. The event is located in static storage and it may be overwritten in subsequent calls; do not call free() on it, and make a copy if you want to keep it.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>Your program should call this function or <a class="el" href="inotifytools_8h.html#a585a4532ebd9f441c0bc61ec29973a55">inotifytools_next_events()</a> frequently; between calls to this function, inotify events will be queued in the kernel, and eventually the queue will overflow and you will miss some events.</dd>
<dd>
If the function <a class="el" href="inotifytools_8h.html#a07f4f258123feb8864f89663a2785ef0">inotifytools_ignore_events_by_regex()</a> has been called with a non-NULL parameter, this function will not return on events which match the regular expression passed to that function. However, the <em>timeout</em> period begins again each time a matching event occurs. </dd></dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l01195">1195</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l01195">inotifytools_next_event()</a>, and <a class="el" href="inotifytools_8c_source.html#l01248">inotifytools_next_events()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l01195">inotifytools_next_event()</a>.</p>

</div>
</div>
<a class="anchor" id="a585a4532ebd9f441c0bc61ec29973a55"></a><!-- doxytag: member="inotifytools.h::inotifytools_next_events" ref="a585a4532ebd9f441c0bc61ec29973a55" args="(long int timeout, int num_events)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct inotify_event* inotifytools_next_events </td>
          <td>(</td>
          <td class="paramtype">long int&nbsp;</td>
          <td class="paramname"> <em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_events</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the next inotify events to occur.</p>
<p><a class="el" href="inotifytools_8h.html#a3765c7874caeb0732926f34ae3c3cd63">inotifytools_initialize()</a> must be called before this function can be used.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td>maximum amount of time, in seconds, to wait for an event. If <em>timeout</em> is non-negative, the function is non-blocking. If <em>timeout</em> is negative, the function will block until an event occurs.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_events</em>&nbsp;</td><td>approximate number of inotify events to wait for until this function returns. Use this for buffering reads to inotify if you expect to receive large amounts of events. You are NOT guaranteed that this number of events will actually be read; instead, you are guaranteed that the number of bytes read from inotify is <em>num_events</em> * sizeof(struct inotify_event). Obviously the larger this number is, the greater the latency between when an event occurs and when you'll know about it. May not be larger than 4096.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>pointer to an inotify event, or NULL if function timed out before an event occurred or <em>num_events</em> &lt; 1. The event is located in static storage and it may be overwritten in subsequent calls; do not call free() on it, and make a copy if you want to keep it. When <em>num_events</em> is greater than 1, this will return a pointer to the first event only, and you MUST call this function again to get pointers to subsequent events; don't try to add to the pointer to find the next events or you will run into trouble.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>You may actually get different events with different values of <em>num_events</em>. This is because inotify does some in-kernel filtering of duplicate events, meaning some duplicate events will not be reported if <em>num_events</em> &gt; 1. For some purposes this is fine, but for others (such as gathering accurate statistics on numbers of event occurrences) you must call this function with <em>num_events</em> = 1, or simply use <a class="el" href="inotifytools_8h.html#acd99ad4277e4259b05eecc7fa51a715c">inotifytools_next_event()</a>.</dd>
<dd>
Your program should call this function frequently; between calls to this function, inotify events will be queued in the kernel, and eventually the queue will overflow and you will miss some events.</dd>
<dd>
If the function <a class="el" href="inotifytools_8h.html#a07f4f258123feb8864f89663a2785ef0">inotifytools_ignore_events_by_regex()</a> has been called with a non-NULL parameter, this function will not return on events which match the regular expression passed to that function. However, the <em>timeout</em> period begins again each time a matching event occurs. </dd></dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l01248">1248</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l01248">inotifytools_next_events()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l01195">inotifytools_next_event()</a>, and <a class="el" href="inotifytools_8c_source.html#l01248">inotifytools_next_events()</a>.</p>

</div>
</div>
<a class="anchor" id="ac2c06dd72f39a6145ea3b6661378df31"></a><!-- doxytag: member="inotifytools.h::inotifytools_printf" ref="ac2c06dd72f39a6145ea3b6661378df31" args="(struct inotify_event *event, char *fmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_printf </td>
          <td>(</td>
          <td class="paramtype">struct inotify_event *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Print a string to standard out using an inotify_event and a printf-like syntax. The string written will only ever be up to 4096 characters in length.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>the event to use to construct a string.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>the format string used to construct a string.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of characters written, or -1 if an error occurs.</dd></dl>
<h2><a class="anchor" id="syntax">
Format string syntax</a></h2>
<p>The following tokens will be replaced with the specified string: </p>
<ul>
<li><code>%w</code> - This will be replaced with the name of the Watched file on which an event occurred. </li>
<li><code>%f</code> - When an event occurs within a directory, this will be replaced with the name of the File which caused the event to occur. Otherwise, this will be replaced with an empty string. </li>
<li><code>%e</code> - Replaced with the Event(s) which occurred, comma-separated. </li>
<li><code>%Xe</code> - Replaced with the Event(s) which occurred, separated by whichever character is in the place of `X'. </li>
<li><code>%T</code> - Replaced by the current Time in the format specified by the string previously passed to <a class="el" href="inotifytools_8h.html#af4528ccdf013b4c86e8f7fe4db88244a">inotifytools_set_printf_timefmt()</a>, or replaced with an empty string if that function has never been called.</li>
</ul>
<h2><a class="anchor" id="example">
Example</a></h2>
<div class="fragment"><pre class="fragment"> <span class="comment">// suppose this is the only file watched.</span>
 <a class="code" href="inotifytools_8h.html#a5e51d1c22c968f8c446ede5ff4caa901">inotifytools_watch_file</a>( <span class="stringliteral">&quot;mydir/&quot;</span>, IN_CLOSE );

 <span class="comment">// wait until an event occurs</span>
 <span class="keyword">struct </span>inotify_event * <span class="keyword">event</span> = <a class="code" href="inotifytools_8h.html#acd99ad4277e4259b05eecc7fa51a715c">inotifytools_next_event</a>( -1 );

 <a class="code" href="inotifytools_8h.html#ac2c06dd72f39a6145ea3b6661378df31">inotifytools_printf</a>(stderr, event, <span class="stringliteral">&quot;in %w, file %f had event(s): %.e\n&quot;</span>);
 <span class="comment">// suppose the file &apos;myfile&apos; in mydir was read from and closed.  Then,</span>
 <span class="comment">// this prints to standard out something like:</span>
 <span class="comment">// &quot;in mydir/, file myfile had event(s): CLOSE_NOWRITE.CLOSE.ISDIR\n&quot;</span>
</pre></div> 
<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l01827">1827</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l01872">inotifytools_fprintf()</a>, and <a class="el" href="inotifytools_8c_source.html#l01827">inotifytools_printf()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l01827">inotifytools_printf()</a>.</p>

</div>
</div>
<a class="anchor" id="a2a4ca66a9d8b0825d4272cd5003a9a0f"></a><!-- doxytag: member="inotifytools.h::inotifytools_remove_watch_by_filename" ref="a2a4ca66a9d8b0825d4272cd5003a9a0f" args="(char const *filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_remove_watch_by_filename </td>
          <td>(</td>
          <td class="paramtype">char const *&nbsp;</td>
          <td class="paramname"> <em>filename</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Remove a watch on a file specified by filename.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>Name of file on which watch should be removed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 on success, 0 on failure. On failure, the error can be obtained from <a class="el" href="inotifytools_8h.html#a313399ccce221c8a5862892396d1a8ec">inotifytools_error()</a>.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The filename specified must always be the original name used to establish the watch. </dd></dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l01038">1038</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l01038">inotifytools_remove_watch_by_filename()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l01038">inotifytools_remove_watch_by_filename()</a>.</p>

</div>
</div>
<a class="anchor" id="a771f60d2232201c691fe725d5cf7e019"></a><!-- doxytag: member="inotifytools.h::inotifytools_remove_watch_by_wd" ref="a771f60d2232201c691fe725d5cf7e019" args="(int wd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_remove_watch_by_wd </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>wd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Remove a watch on a file specified by watch descriptor.</p>
<p><a class="el" href="inotifytools_8h.html#a3765c7874caeb0732926f34ae3c3cd63">inotifytools_initialize()</a> must be called before this function can be used.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>wd</em>&nbsp;</td><td>Watch descriptor of watch to be removed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 on success, 0 on failure. If the given watch doesn't exist, returns 1. On failure, the error can be obtained from <a class="el" href="inotifytools_8h.html#a313399ccce221c8a5862892396d1a8ec">inotifytools_error()</a>. </dd></dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l01013">1013</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l01013">inotifytools_remove_watch_by_wd()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l01013">inotifytools_remove_watch_by_wd()</a>.</p>

</div>
</div>
<a class="anchor" id="ac6f5ecf6f3d854535132fe9790db008d"></a><!-- doxytag: member="inotifytools.h::inotifytools_replace_filename" ref="ac6f5ecf6f3d854535132fe9790db008d" args="(char const *oldname, char const *newname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inotifytools_replace_filename </td>
          <td>(</td>
          <td class="paramtype">char const *&nbsp;</td>
          <td class="paramname"> <em>oldname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&nbsp;</td>
          <td class="paramname"> <em>newname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Replace a certain filename prefix on all watches.</p>
<p>This function should be used to update filenames for an entire directory tree when a directory is known to have been moved or renamed. At the moment, libinotifytools does not automatically handle this situation.</p>
<p><a class="el" href="inotifytools_8h.html#a3765c7874caeb0732926f34ae3c3cd63">inotifytools_initialize()</a> must be called before this function can be used.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>oldname</em>&nbsp;</td><td>Current filename prefix.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>newname</em>&nbsp;</td><td>New filename prefix.</td></tr>
  </table>
  </dd>
</dl>
<h2><a class="anchor" id="example">
Example</a></h2>
<div class="fragment"><pre class="fragment"> <span class="comment">// if /home/user1/original_dir is moved to /home/user2/new_dir, then to</span>
 <span class="comment">// update all watches:</span>
 <a class="code" href="inotifytools_8h.html#ac6f5ecf6f3d854535132fe9790db008d">inotifytools_replace_filename</a>( <span class="stringliteral">&quot;/home/user1/original_dir&quot;</span>,
                                <span class="stringliteral">&quot;/home/user2/new_dir&quot;</span> );
</pre></div> 
<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l00957">957</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l00957">inotifytools_replace_filename()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l00957">inotifytools_replace_filename()</a>.</p>

</div>
</div>
<a class="anchor" id="a764239f33bd2a092c445362e75828181"></a><!-- doxytag: member="inotifytools.h::inotifytools_set_filename_by_filename" ref="a764239f33bd2a092c445362e75828181" args="(char const *oldname, char const *newname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inotifytools_set_filename_by_filename </td>
          <td>(</td>
          <td class="paramtype">char const *&nbsp;</td>
          <td class="paramname"> <em>oldname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&nbsp;</td>
          <td class="paramname"> <em>newname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the filename for one or more watches with a particular existing filename.</p>
<p>This function should be used to update a filename when a file is known to have been moved or renamed. At the moment, libinotifytools does not automatically handle this situation.</p>
<p><a class="el" href="inotifytools_8h.html#a3765c7874caeb0732926f34ae3c3cd63">inotifytools_initialize()</a> must be called before this function can be used.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>oldname</em>&nbsp;</td><td>Current filename.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>newname</em>&nbsp;</td><td>New filename. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l00927">927</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l00927">inotifytools_set_filename_by_filename()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l00927">inotifytools_set_filename_by_filename()</a>.</p>

</div>
</div>
<a class="anchor" id="af80acc2952c748a80641926ff222571c"></a><!-- doxytag: member="inotifytools.h::inotifytools_set_filename_by_wd" ref="af80acc2952c748a80641926ff222571c" args="(int wd, char const *filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inotifytools_set_filename_by_wd </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>wd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&nbsp;</td>
          <td class="paramname"> <em>filename</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the filename for a particular watch descriptor.</p>
<p>This function should be used to update a filename when a file is known to have been moved or renamed. At the moment, libinotifytools does not automatically handle this situation.</p>
<p><a class="el" href="inotifytools_8h.html#a3765c7874caeb0732926f34ae3c3cd63">inotifytools_initialize()</a> must be called before this function can be used.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>wd</em>&nbsp;</td><td>Watch descriptor.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>New filename. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l00905">905</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l00905">inotifytools_set_filename_by_wd()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l00905">inotifytools_set_filename_by_wd()</a>.</p>

</div>
</div>
<a class="anchor" id="af4528ccdf013b4c86e8f7fe4db88244a"></a><!-- doxytag: member="inotifytools.h::inotifytools_set_printf_timefmt" ref="af4528ccdf013b4c86e8f7fe4db88244a" args="(char *fmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inotifytools_set_printf_timefmt </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set time format for printf functions.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>A format string valid for use with strftime, or NULL. If NULL, time substitutions will no longer be made in printf functions. Note that this format string is not validated at all; using an incorrect format string will cause the printf functions to give incorrect results. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l02108">2108</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l02108">inotifytools_set_printf_timefmt()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l02108">inotifytools_set_printf_timefmt()</a>.</p>

</div>
</div>
<a class="anchor" id="a92f2dc66af4fd01b09b64b6813686282"></a><!-- doxytag: member="inotifytools.h::inotifytools_snprintf" ref="a92f2dc66af4fd01b09b64b6813686282" args="(char *out, int size, struct inotify_event *event, char *fmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_snprintf </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct inotify_event *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Construct a string using an inotify_event and a printf-like syntax. The string can only ever be up to 4096 characters in length.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>out</em>&nbsp;</td><td>location in which to store string.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>maximum amount of characters to write.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>the event to use to construct a string.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>the format string used to construct a string.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of characters written, or -1 if an error occurs.</dd></dl>
<h2><a class="anchor" id="syntax">
Format string syntax</a></h2>
<p>The following tokens will be replaced with the specified string: </p>
<ul>
<li><code>%w</code> - This will be replaced with the name of the Watched file on which an event occurred. </li>
<li><code>%f</code> - When an event occurs within a directory, this will be replaced with the name of the File which caused the event to occur. Otherwise, this will be replaced with an empty string. </li>
<li><code>%e</code> - Replaced with the Event(s) which occurred, comma-separated. </li>
<li><code>%Xe</code> - Replaced with the Event(s) which occurred, separated by whichever character is in the place of `X'. </li>
<li><code>%T</code> - Replaced by the current Time in the format specified by the string previously passed to <a class="el" href="inotifytools_8h.html#af4528ccdf013b4c86e8f7fe4db88244a">inotifytools_set_printf_timefmt()</a>, or replaced with an empty string if that function has never been called.</li>
</ul>
<h2><a class="anchor" id="example">
Example</a></h2>
<div class="fragment"><pre class="fragment"> <span class="comment">// suppose this is the only file watched.</span>
 <a class="code" href="inotifytools_8h.html#a5e51d1c22c968f8c446ede5ff4caa901">inotifytools_watch_file</a>( <span class="stringliteral">&quot;mydir/&quot;</span>, IN_CLOSE );

 <span class="comment">// wait until an event occurs</span>
 <span class="keyword">struct </span>inotify_event * <span class="keyword">event</span> = <a class="code" href="inotifytools_8h.html#acd99ad4277e4259b05eecc7fa51a715c">inotifytools_next_event</a>( -1 );

 <span class="keywordtype">char</span> mystring[1024];
 <a class="code" href="inotifytools_8h.html#a92f2dc66af4fd01b09b64b6813686282">inotifytools_snprintf</a>( mystring, 1024, event,
                        <span class="stringliteral">&quot;in %w, file %f had event(s): %.e\n&quot;</span> );
 printf( mystring );
 <span class="comment">// suppose the file &apos;myfile&apos; in mydir was written to and closed.  Then,</span>
 <span class="comment">// this prints something like:</span>
 <span class="comment">// &quot;in mydir/, file myfile had event(s): CLOSE_WRITE.CLOSE.ISDIR\n&quot;</span>
</pre></div> 
<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l01981">1981</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l00630">inotifytools_event_to_str()</a>, <a class="el" href="inotifytools_8c_source.html#l00666">inotifytools_event_to_str_sep()</a>, <a class="el" href="inotifytools_8c_source.html#l00861">inotifytools_filename_from_wd()</a>, and <a class="el" href="inotifytools_8c_source.html#l01981">inotifytools_snprintf()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l01981">inotifytools_snprintf()</a>, and <a class="el" href="inotifytools_8c_source.html#l01930">inotifytools_sprintf()</a>.</p>

</div>
</div>
<a class="anchor" id="aabf4cbafd50012f6e35b32a052677c74"></a><!-- doxytag: member="inotifytools.h::inotifytools_sprintf" ref="aabf4cbafd50012f6e35b32a052677c74" args="(char *out, struct inotify_event *event, char *fmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_sprintf </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct inotify_event *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Construct a string using an inotify_event and a printf-like syntax. The string can only ever be up to 4096 characters in length.</p>
<p>This function will keep writing until it reaches 4096 characters. If your allocated array is not large enough to hold the entire string, your program may crash. <a class="el" href="inotifytools_8h.html#a92f2dc66af4fd01b09b64b6813686282">inotifytools_snprintf()</a> is safer and you should use it where possible.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>out</em>&nbsp;</td><td>location in which to store string.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>the event to use to construct a string.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>the format string used to construct a string.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of characters written, or -1 if an error occurs.</dd></dl>
<h2><a class="anchor" id="syntax">
Format string syntax</a></h2>
<p>The following tokens will be replaced with the specified string: </p>
<ul>
<li><code>%w</code> - This will be replaced with the name of the Watched file on which an event occurred. </li>
<li><code>%f</code> - When an event occurs within a directory, this will be replaced with the name of the File which caused the event to occur. Otherwise, this will be replaced with an empty string. </li>
<li><code>%e</code> - Replaced with the Event(s) which occurred, comma-separated. </li>
<li><code>%Xe</code> - Replaced with the Event(s) which occurred, separated by whichever character is in the place of `X'. </li>
<li><code>%T</code> - Replaced by the current Time in the format specified by the string previously passed to <a class="el" href="inotifytools_8h.html#af4528ccdf013b4c86e8f7fe4db88244a">inotifytools_set_printf_timefmt()</a>, or replaced with an empty string if that function has never been called.</li>
</ul>
<h2><a class="anchor" id="example">
Example</a></h2>
<div class="fragment"><pre class="fragment"> <span class="comment">// suppose this is the only file watched.</span>
 <a class="code" href="inotifytools_8h.html#a5e51d1c22c968f8c446ede5ff4caa901">inotifytools_watch_file</a>( <span class="stringliteral">&quot;mydir/&quot;</span>, IN_CLOSE );

 <span class="comment">// wait until an event occurs</span>
 <span class="keyword">struct </span>inotify_event * <span class="keyword">event</span> = <a class="code" href="inotifytools_8h.html#acd99ad4277e4259b05eecc7fa51a715c">inotifytools_next_event</a>( -1 );

 <span class="keywordtype">char</span> mystring[1024];
 <span class="comment">// hope this doesn&apos;t crash - if filename is really long, might not fit into</span>
 <span class="comment">// mystring!</span>
 <a class="code" href="inotifytools_8h.html#aabf4cbafd50012f6e35b32a052677c74">inotifytools_sprintf</a>(mystring, event, <span class="stringliteral">&quot;in %w, file %f had event(s): %.e\n&quot;</span>);
 printf( mystring );
 <span class="comment">// suppose the file &apos;myfile&apos; in mydir was written to and closed.  Then,</span>
 <span class="comment">// this prints something like:</span>
 <span class="comment">// &quot;in mydir/, file myfile had event(s): CLOSE_WRITE.CLOSE.ISDIR\n&quot;</span>
</pre></div> 
<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l01930">1930</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l01981">inotifytools_snprintf()</a>, and <a class="el" href="inotifytools_8c_source.html#l01930">inotifytools_sprintf()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l01872">inotifytools_fprintf()</a>, and <a class="el" href="inotifytools_8c_source.html#l01930">inotifytools_sprintf()</a>.</p>

</div>
</div>
<a class="anchor" id="ac5f03415912fa505bcb7f2caf9273b45"></a><!-- doxytag: member="inotifytools.h::inotifytools_str_to_event" ref="ac5f03415912fa505bcb7f2caf9273b45" args="(char const *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_str_to_event </td>
          <td>(</td>
          <td class="paramtype">char const *&nbsp;</td>
          <td class="paramname"> <em>event</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Convert comma-separated events from string form to integer form (as in inotify.h).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>a sequence of events in string form as defined in inotify.h without leading IN_ prefix (e.g., MODIFY, ATTRIB), comma-separated. Case insensitive. Can be a single event. Can be empty or NULL. See section <a class="el" href="inotifytools_8h.html#events">Events</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>integer representing the mask specified by <em>event</em>, or 0 if any string in <em>event</em> is empty or NULL, or -1 if any string in <em>event</em> does not match any event.</dd></dl>
<h2><a class="anchor" id="example">
Example</a></h2>
<div class="fragment"><pre class="fragment"> <span class="keywordtype">char</span> * eventstr = <span class="stringliteral">&quot;MODIFY,CLOSE,CREATE&quot;</span>;
 <span class="keywordtype">int</span> eventnum = <a class="code" href="inotifytools_8h.html#ac5f03415912fa505bcb7f2caf9273b45">inotifytools_str_to_event</a>( eventstr );
 <span class="keywordflow">if</span> ( eventnum == IN_MODIFY | IN_CLOSE | IN_CREATE ) {
    printf( <span class="stringliteral">&quot;This code always gets executed!\n&quot;</span> );
 }
</pre></div> 
<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l00543">543</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l00543">inotifytools_str_to_event()</a>, and <a class="el" href="inotifytools_8c_source.html#l00473">inotifytools_str_to_event_sep()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l00543">inotifytools_str_to_event()</a>.</p>

</div>
</div>
<a class="anchor" id="a7e26c94c983d93669813c439883b334f"></a><!-- doxytag: member="inotifytools.h::inotifytools_str_to_event_sep" ref="a7e26c94c983d93669813c439883b334f" args="(char const *event, char sep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_str_to_event_sep </td>
          <td>(</td>
          <td class="paramtype">char const *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>sep</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Convert character separated events from string form to integer form (as in inotify.h).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>a sequence of events in string form as defined in inotify.h without leading IN_ prefix (e.g., MODIFY, ATTRIB), separated by the <em>sep</em> character. Case insensitive. Can be a single event. Can be empty or NULL. See section <a class="el" href="inotifytools_8h.html#events">Events</a>.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sep</em>&nbsp;</td><td>Character used to separate events. <em>sep</em> must not be a character in a-z, A-Z, or _.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>integer representing the mask specified by <em>event</em>, or 0 if any string in <em>event</em> is empty or NULL, or -1 if any string in <em>event</em> does not match any event or <em>sep</em> is invalid.</dd></dl>
<h2><a class="anchor" id="example">
Example</a></h2>
<div class="fragment"><pre class="fragment"> <span class="keywordtype">char</span> * eventstr = <span class="stringliteral">&quot;MODIFY:CLOSE:CREATE&quot;</span>;
 <span class="keywordtype">int</span> eventnum = <a class="code" href="inotifytools_8h.html#a7e26c94c983d93669813c439883b334f">inotifytools_str_to_event_sep</a>( eventstr, <span class="charliteral">&apos;:&apos;</span> );
 <span class="keywordflow">if</span> ( eventnum == IN_MODIFY | IN_CLOSE | IN_CREATE ) {
    printf( <span class="stringliteral">&quot;This code always gets executed!\n&quot;</span> );
 }
</pre></div> 
<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l00473">473</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l00473">inotifytools_str_to_event_sep()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l00543">inotifytools_str_to_event()</a>, and <a class="el" href="inotifytools_8c_source.html#l00473">inotifytools_str_to_event_sep()</a>.</p>

</div>
</div>
<a class="anchor" id="a5e51d1c22c968f8c446ede5ff4caa901"></a><!-- doxytag: member="inotifytools.h::inotifytools_watch_file" ref="a5e51d1c22c968f8c446ede5ff4caa901" args="(char const *filename, int events, ino_callback_t cbfunc, void *cbarg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_watch_file </td>
          <td>(</td>
          <td class="paramtype">char const *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>events</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ino_callback_t&nbsp;</td>
          <td class="paramname"> <em>cbfunc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>cbarg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set up a watch on a file.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>Absolute or relative path of file to watch.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>events</em>&nbsp;</td><td>bitwise ORed inotify events to watch for. See section <a class="el" href="inotifytools_8h.html#events">Events</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 on success, 0 on failure. On failure, the error can be obtained from <a class="el" href="inotifytools_8h.html#a313399ccce221c8a5862892396d1a8ec">inotifytools_error()</a>. </dd></dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l01064">1064</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l01064">inotifytools_watch_file()</a>, and <a class="el" href="inotifytools_8c_source.html#l01086">inotifytools_watch_files()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l01064">inotifytools_watch_file()</a>, and <a class="el" href="inotifytools_8c_source.html#l01442">inotifytools_watch_recursively_with_exclude()</a>.</p>

</div>
</div>
<a class="anchor" id="a8e7c7a3f704f323ee197c1a3c65e8bb0"></a><!-- doxytag: member="inotifytools.h::inotifytools_watch_files" ref="a8e7c7a3f704f323ee197c1a3c65e8bb0" args="(char const *filenames[], int events, ino_callback_t cbfunc, void *cbarg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_watch_files </td>
          <td>(</td>
          <td class="paramtype">char const *&nbsp;</td>
          <td class="paramname"> <em>filenames</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>events</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ino_callback_t&nbsp;</td>
          <td class="paramname"> <em>cbfunc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>cbarg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set up a watch on a list of files.</p>
<p><a class="el" href="inotifytools_8h.html#a3765c7874caeb0732926f34ae3c3cd63">inotifytools_initialize()</a> must be called before this function can be used.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filenames</em>&nbsp;</td><td>null-terminated array of absolute or relative paths of files to watch.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>events</em>&nbsp;</td><td>bitwise OR'ed inotify events to watch for. See section <a class="el" href="inotifytools_8h.html#events">Events</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 on success, 0 on failure. On failure, the error can be obtained from <a class="el" href="inotifytools_8h.html#a313399ccce221c8a5862892396d1a8ec">inotifytools_error()</a>. </dd></dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l01086">1086</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l01086">inotifytools_watch_files()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l01064">inotifytools_watch_file()</a>, and <a class="el" href="inotifytools_8c_source.html#l01086">inotifytools_watch_files()</a>.</p>

</div>
</div>
<a class="anchor" id="a9092c1154cdf7885ddb70d65438379dd"></a><!-- doxytag: member="inotifytools.h::inotifytools_watch_recursively" ref="a9092c1154cdf7885ddb70d65438379dd" args="(char const *path, int events, ino_callback_t cbfunc, void *cbarg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_watch_recursively </td>
          <td>(</td>
          <td class="paramtype">char const *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>events</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ino_callback_t&nbsp;</td>
          <td class="paramname"> <em>cbfunc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>cbarg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set up recursive watches on an entire directory tree.</p>
<p><a class="el" href="inotifytools_8h.html#a3765c7874caeb0732926f34ae3c3cd63">inotifytools_initialize()</a> must be called before this function can be used.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>path of directory or file to watch. If the path is a directory, every subdirectory will also be watched for the same events up to the maximum readable depth. If the path is a file, the file is watched exactly as if <a class="el" href="inotifytools_8h.html#a5e51d1c22c968f8c446ede5ff4caa901">inotifytools_watch_file()</a> were used.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>events</em>&nbsp;</td><td>Inotify events to watch for. See section <a class="el" href="inotifytools_8h.html#events">Events</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 on success, 0 on failure. On failure, the error can be obtained from <a class="el" href="inotifytools_8h.html#a313399ccce221c8a5862892396d1a8ec">inotifytools_error()</a>. Note that some errors on subdirectories will be ignored; for example, if you watch a directory tree which contains some directories which you do not have access to, those directories will not be watched, but this function will still return 1 if no other errors occur.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>This function does not attempt to work atomically. If you use this function to watch a directory tree and files or directories are being created or removed within that directory tree, there are no guarantees as to whether or not those files will be watched. </dd></dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l01406">1406</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l01406">inotifytools_watch_recursively()</a>, and <a class="el" href="inotifytools_8c_source.html#l01442">inotifytools_watch_recursively_with_exclude()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l01406">inotifytools_watch_recursively()</a>.</p>

</div>
</div>
<a class="anchor" id="a4262597ad6d28dc97db04b5663494e5c"></a><!-- doxytag: member="inotifytools.h::inotifytools_watch_recursively_with_exclude" ref="a4262597ad6d28dc97db04b5663494e5c" args="(char const *path, int events, char const **exclude_list, ino_callback_t cbfunc, void *cbarg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_watch_recursively_with_exclude </td>
          <td>(</td>
          <td class="paramtype">char const *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>events</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const **&nbsp;</td>
          <td class="paramname"> <em>exclude_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ino_callback_t&nbsp;</td>
          <td class="paramname"> <em>cbfunc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>cbarg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set up recursive watches on an entire directory tree, optionally excluding some directories.</p>
<p><a class="el" href="inotifytools_8h.html#a3765c7874caeb0732926f34ae3c3cd63">inotifytools_initialize()</a> must be called before this function can be used.</p>
<dl class="author"><dt><b>Author:</b></dt><dd>UH</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>path of directory or file to watch. If the path is a directory, every subdirectory will also be watched for the same events up to the maximum readable depth. If the path is a file, the file is watched exactly as if <a class="el" href="inotifytools_8h.html#a5e51d1c22c968f8c446ede5ff4caa901">inotifytools_watch_file()</a> were used.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>exclude_list</em>&nbsp;</td><td>NULL terminated path list of directories not to watch. Can be NULL if no paths are to be excluded. Directories may or may not include a trailing '/'.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>events</em>&nbsp;</td><td>Inotify events to watch for. See section <a class="el" href="inotifytools_8h.html#events">Events</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 on success, 0 on failure. On failure, the error can be obtained from <a class="el" href="inotifytools_8h.html#a313399ccce221c8a5862892396d1a8ec">inotifytools_error()</a>. Note that some errors on subdirectories will be ignored; for example, if you watch a directory tree which contains some directories which you do not have access to, those directories will not be watched, but this function will still return 1 if no other errors occur.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>This function does not attempt to work atomically. If you use this function to watch a directory tree and files or directories are being created or removed within that directory tree, there are no guarantees as to whether or not those files will be watched. </dd></dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l01442">1442</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l01064">inotifytools_watch_file()</a>, and <a class="el" href="inotifytools_8c_source.html#l01442">inotifytools_watch_recursively_with_exclude()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l01406">inotifytools_watch_recursively()</a>, and <a class="el" href="inotifytools_8c_source.html#l01442">inotifytools_watch_recursively_with_exclude()</a>.</p>

</div>
</div>
<a class="anchor" id="a594e7f515b392c07c4f1f4eeffcda6c3"></a><!-- doxytag: member="inotifytools.h::inotifytools_wd_from_filename" ref="a594e7f515b392c07c4f1f4eeffcda6c3" args="(char const *filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int inotifytools_wd_from_filename </td>
          <td>(</td>
          <td class="paramtype">char const *&nbsp;</td>
          <td class="paramname"> <em>filename</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the watch descriptor for a particular filename.</p>
<p><a class="el" href="inotifytools_8h.html#a3765c7874caeb0732926f34ae3c3cd63">inotifytools_initialize()</a> must be called before this function can be used.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>file name to find watch descriptor for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>watch descriptor associated with filename, or -1 if <em>filename</em> is not associated with any watch descriptor.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The filename specified must always be the original name used to establish the watch. </dd></dl>

<p>Definition at line <a class="el" href="inotifytools_8c_source.html#l00884">884</a> of file <a class="el" href="inotifytools_8c_source.html">inotifytools.c</a>.</p>

<p>References <a class="el" href="inotifytools_8c_source.html#l00884">inotifytools_wd_from_filename()</a>.</p>

<p>Referenced by <a class="el" href="inotifytools_8c_source.html#l01739">inotifytools_get_stat_by_filename()</a>, and <a class="el" href="inotifytools_8c_source.html#l00884">inotifytools_wd_from_filename()</a>.</p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 22 Oct 2018 for libinotifytools by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
